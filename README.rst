================
Время прибывания
================


Задание
=======

Необходимо написать программу на Python, которая вычисляет общее время пребывания всех людей за каждое число.

Ограничения:

1. Сделать реализацию, потребление памяти которой не зависит от размера входного файла.
2. Сделать возможность разбивки по работникам и фильтрации по интервалам дат (например, с 01-08-2020 по 31-08-2020).
3. Можно использовать любой фреймворк.
4. Продемонстрировать работу с помощью тестов.
5. Обеспечить максимально простое развёртывание приложения (например docker-контейнер).

Файл

.. code-block:: xml

    <?xml version="1.0" encoding="UTF-8"?>
    <people>
        <person full_name="i.ivanov">
            <start>21-12-2011 10:54:47</start>
            <end>21-12-2011 19:43:02</end>
        </person>
        <person full_name="a.stepanova">
            <start>21-12-2011 09:40:10</start>
            <end>21-12-2011 17:59:15</end>
        </person>
    ...
    </people>


Реализация
==========

Дизайн
------

По заданию не ясно какой интерфейс предполагается для взаимодействия.
Я выбиру командный.

Требование "Независимость потребления памяти от размера входного файла" удволетворяет sax парсер. Я набил руку на ET. Буду использовать его, хотя таких гарантий он не дает.
Требование "Независимость потребления памяти от размера входного файла" подразумевает заведение значений для расчета и накопление результатов. Однако заранее не известно количество дней. В моём представлении память все равно будет расти от дней (брать на себя вызов `как это сделал Гвидо <https://web.archive.org/web/20200703041750/https://neopythonic.blogspot.com/2008/10/sorting-million-32-bit-integers-in-2mb.html>`_ я не собираюсь в данном случае).
Требование "Независимость потребления памяти от размера входного файла" можно замаскировать ленивыми вычислениями. Генераторы будут в помощь.

Собрав все требования о сумме, группировке, фильтрации, мне показалось, что это "мини" движок sql. Вот бы у меня получилось выполнить операции над "строками", а не нагромождение несвязных концепций прибитых гвоздями друг к другу.
